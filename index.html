<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissors</title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <div id="container">
      <div id="player-score">0</div>
      <div id="computer-score">0</div>
    </div>
    <script>
      let computerSelection;
      let playerSelection;
      let computerScore = 0;
      let playerScore = 0;

      let buttons = document.querySelectorAll("button");

      buttons.forEach((button) => {
        button.addEventListener("click", () => {
          playerSelection = button.innerText.toLowerCase();
          playRound(playerSelection, computerSelection);

          if (playerScore === 5 || computerScore === 5) {
            declareWinner();
          }
        });
      });

      const myArray = ["Rock", "Paper", "Scissors"];

      function computerPlay() {
        return myArray[~~(Math.random() * myArray.length)];
      }

      function declareWinner() {
        if (playerScore === computerScore) {
          alert(playerScore + "-" + computerScore + "\nTie game!");
          displayResults(playerScore + "-" + computerScore + "\nTie game!");
        } else if (playerScore > computerScore) {
          alert(playerScore + "-" + computerScore + "\nYou win!!");
          displayResults(playerScore + "-" + computerScore + "\nYou win!!");
        } else {
          alert(
            playerScore +
              "-" +
              computerScore +
              "\nYou lost. Better luck next time!"
          );
          displayResults(
            playerScore +
              "-" +
              computerScore +
              "\nYou lost. Better luck next time!"
          );
        }
      }

      function playRound(playerSelection, computerSelection) {
        computerSelection = computerPlay().toLowerCase();
        playerSelection = playerSelection.toLowerCase();
        if (computerSelection == playerSelection) {
          alert("Tie game!");
          displayResults("Tie game!");
        } else if (
          (computerSelection == "rock" && playerSelection == "scissors") ||
          (computerSelection == "scissors" && playerSelection == "paper") ||
          (computerSelection == "paper" && playerSelection == "rock")
        ) {
          alert("You lose! " + computerSelection + " beats " + playerSelection);
          computerScore = ++computerScore;
          keepScore();
          displayResults(
            "You lose! " + computerSelection + " beats " + playerSelection
          );
        } else {
          alert("You win! " + playerSelection + " beats " + computerSelection);
          playerScore = ++playerScore;
          keepScore();
          displayResults(
            "You win! " + playerSelection + " beats " + computerSelection
          );
        }
      }

      function keepScore() {
        let playerScoreBox = document.querySelector("#player-score");
        let computerScoreBox = document.querySelector("#computer-score");

        playerScoreBox.textContent = playerScore;
        computerScoreBox.textContent = computerScore;
      }

      function displayResults(str) {
        const container = document.querySelector("#container");
        const p = document.createElement("p");

        p.textContent = str;
        container.appendChild(p);
      }
    </script>
  </body>
</html>
